"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getErrorResponse = getErrorResponse;
exports.getHttpStatusFromError = getHttpStatusFromError;

var _rmExtra = require("@frankycty/rm-extra");

function getErrorResponse(error) {
  var payload = (0, _rmExtra.path)(["output", "payload"], error);

  if (error.isJoi) {
    payload.message = (0, _rmExtra.head)(error.details).message;
  }

  if ((0, _rmExtra.isNotNilOrEmpty)(error.data)) {
    payload.context = error.data;
  }

  return payload;
}

function getHttpStatusFromError(err, badRequestErrors) {
  if ((0, _rmExtra.includes)(err.name, badRequestErrors)) {
    return 400;
  }

  return err.output && err.output.statusCode || err.status || 500;
}