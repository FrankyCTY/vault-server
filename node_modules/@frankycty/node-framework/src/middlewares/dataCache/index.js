const cacheControlHeaders = {
  dataCacheControl: "Data-Max-Age",
  dataCache: "Data-Age",
};

export default () => {
  return async (ctx, next) => {
    const dataCacheControl = ctx.get(cacheControlHeaders.dataCacheControl);
    ctx.state.dataMaxAge = Number.parseInt(dataCacheControl, 10) * 1000;

    await next();

    ctx.set(cacheControlOpts.dataCache, ctx.dataAge || 0);
  };
};
